---
layout:     post
title:     deepseek 接入复盘工具
subtitle:  
date:       2025-02-28
author:     
header-img: 
catalog: true
tags:
    - < AI >
typora-root-url: ..
---



# deepseek 接入复盘工具

前提：不同模型需传不同参数和使用不同提示词

- **`deepseek-chat`**：对话交互，参数侧重于 - 对话的流畅性、回复长度 max_tokens（控制生成的最大 token 数量）、温度 temperature（随机性，值越大回复越随机，越小越确定）等
    - 提示词可以更自然、口语化，模拟真实的对话场景：给我讲个有趣的笑话
- **`deepseek-reasoner`**：逻辑推理和问题求解，参数侧重于 - 推理深度、准确性、控制推理步骤、推理规则
    - 提示词需要更严谨、明确地描述问题，以便模型进行推理：已知xxxx，判断xxx是否xxx，并给出推理过程
    - 你是谁 + 背景信息 + 你的目标 - 把它当做员工

#### 提示词测试

月报 - 回顾总结 获取 AI 推荐，由于此结果依赖于过往周期信息，也就是依赖于上下文，采用  deepseek-chat

1、先接入

```js
npm install openai
pip3 install -U openai // 使用 deepseek-reasoner 时，请先升级 OpenAI SDK 以支持新参数
```

```js
import OpenAI from "openai";
const openai = new OpenAI({
    baseURL: 'http://api.deepseek.com/v1',
    apiKey: process.env.DEEPSEEK_API_KEY
});
export async function AIPOST(request: RequestBody) {
    try{
        const { inputText } = request;
        const completion = await openai.chat.completions.create({
            messages: [{ role: "system", content: inputText }],
            model: "deepseek-chat",
        });
        console.log(completion.choices[0].message.content);

        return new Response(JSON.stringify(inputText), {
            status: 200,
            headers: {'Content-Type': 'application/json'}
        });
    }catch(e){return new Response('err', {status: 500})}
}
```

2、先使用 deepseek-chat 测试不同提示语

-	注意点：响应比较久，避免 timeout，可以手动设置
-	message 中 role 有四个角色
    -	user 用户来提问、交互、下达指令 - 发起对话的起点
    -	system 设置对话初始的上下文、对模型行为进行全局控制和约束 - 对话开始时发送，设定回复风格、限定专业范围、设置身份和背景
    -	assistant：代表模型给出的回复 - 可以在多轮对话中，与 user 消息共同构成上下文
    -	tool ：整合外部工具或服务的输出

| 模型          | 提示语测试                                                   | 结果分析                                                     | 得到结果                                                     |
| ------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| deepseek-chat | "messages": [     {       "content": "【我有一组数据，是我】2025-02-10 至 2025-02-27 共计17天的【学习、日常记录，我想要汇总、总结得到对 前端 和 其他事项 的回顾总结，以及下个月的大致计划。数据如下】：'时长'，【每周期数据列表】：'02-10 至 02-18': '学习任务': '', '运动+睡眠+电影': '','TED+阅读+播客': '','学习方法复盘和改进': '','02-19 至 02-27': '学习任务':'','运动+睡眠+电影': '','TED+阅读+播客': '','学习方法复盘和改进': ''",       "role": "user"     }   ], | 1、给出的下个月计划完全不能用 <br/>2、返回的学习时长只是将输入的学习时长转为中文  <br/> | 1、前端学习进展 相对有用：“\- **Next.js + J-table + MySQL**：成功部署并上线了多个工具，包括月报工具和二次阅读工具。- **Box1学习**：深入学习了CR复盘代码、flex布局、内存泄漏、渲染合成层、babel、http3、nextTick、垃圾回收机制等前端核心知识。- **Nest.js、KOA2、Express**：复习和比较了这些后端框架，加深了对Node.js生态的理解。”  <br/>2、LTN 做题 相对有用：“\- 共计完成了236题（包括错题重做），总时长46小时27分钟。- 错题复习机制得到改进，增加了错题复习环节，提高了学习效率。”<br/> 3、阅读与TED 相对有用：”- 阅读了《有效学习》并输出了相关博客，利用xmind对阅读内容进行了梳理。- TED观看较少，主要因为精神状态较好，暂时不需要额外激励。“<br/>4、生活与健康总结 相对有用：“- **睡眠**：整体睡眠时间不稳定，有几天通宵，其他时间多在1点到2点之间。尝试早起，白天可用时间增加，但睡眠时长减少。- **运动**：恢复了运动，共计5天训练，3天休息。运动对情绪有显著提升，但手部受伤限制了器械训练，暂时以有氧为主。- **电影与娱乐**：观看了《鬼怪-池恩棹的生生不息》、《明侦》等，磕CP-Re作为背景音陪伴学习。”<br/> 7、学习方法改进 相对有用：”- **LTN做题**：维持当前周期，增加错题复习环节，精简做题记录。- **学习计划**：坚定执行学习计划，确保学习方向的明确性和一致性。“ |
|               | 1、修改响应值为 json 格式"response_format": {     "type": "json_object"   }<br/>2、不传递时长总计、不需要下个月计划 | 1、改为 json 后，反而增加了处理数据的工作量，看不清 + 难以填充、存储 |                                                              |
|               | 1、响应值改回  "response_format": {     "type": "text"   }<br/>"content"：“我有一组数据，是我2025-02-10 至 2025-02-27 共计17天的学习、日常记录，我想要汇总、总结得到对 前端 和 其他事项 的回顾总结。每周期数据列表数据如下：xxx” | 1、每一项的总结都是：先按照周期总结单周期情况，再加上总体总结 -- 格式很不错，方便统计总结<br/>2、总体总结不只是总结，还戴上了建议，不需要建议，侧重于总结即可 | 1、前端学习进展：“  **线上工具开发**  **02-10 至 02-18**：成功部署并上线了 Next.js、J-table 和 MySQL 相关工具，完成了月报工具、二次阅读工具和手机样式补充。 **02-19 至 02-27**：修复了部署后的各种 bug，优化了 nginx 配置，工具已完全对外开放。 **总结**：线上工具的开发和部署进展顺利，后续可以继续优化用户体验和性能。 **技术学习与复盘**  **02-10 至 02-18**：复盘了 CR 代码，学习了 flex 布局、内存泄漏、渲染合成层、babel、http3、nextTick 和垃圾回收机制。 **02-19 至 02-27**：学习了 Nest.js 官方文档，复习了 KOA2，并对比了 Express。 **总结**：技术学习的广度较大，建议在后续周期中深入某些技术点，并结合实际项目进行实践。”<br/>2、LTN 做题： **02-10 至 02-18**：完成 112 题（89 题新题 + 23 题错题重做），总时长 20 小时 34 分钟。 - **02-19 至 02-27**：完成 124 题（88 题新题 + 36 题错题重做），总时长 23 小时 50 分钟。 - **总结**：LTN 做题的节奏保持稳定，错题复习的效果显著，建议继续保持错题复习的习惯，并精简做题记录，专注于错误痕迹的加深。<br/>3、阅读与TED：TED、阅读与播客** - **02-10 至 02-18**：听了 3 次 TED，阅读了 2 次，完成了二次阅读工具的开发，并逐步整理《有效学习》博客。 - **02-19 至 02-27**：听了 1 次 TED，阅读了 4 次，完成了《有些学习》的整理，并输出了博客。 - **总结**：TED 和阅读对精神力的提升有帮助，建议在后续周期中继续坚持，并结合实际学习内容进行输出和复盘。<br/>6、生活与健康总结：“1. **运动与健康** - **02-10 至 02-18**：因感冒休息了 8 天，未进行运动，睡眠质量较差，通宵和晚睡情况较多。 - **02-19 至 02-27**：恢复了运动，共进行了 5 次锻炼，情绪和身体状态明显好转，但手上的伤仍未痊愈，暂时只能进行有氧运动。 - **总结**：运动对身体和情绪的积极影响显著，建议继续保持运动习惯，同时注意伤病的恢复。2. **睡眠** - **02-10 至 02-18**：睡眠时间不规律，通宵和晚睡情况较多，影响了白天的精力和效率。 - **02-19 至 02-27**：尝试早起，睡眠时间有所改善，但仍需进一步调整，争取更早入睡。 - **总结**：睡眠质量的提升对学习和工作效率至关重要，建议继续调整作息，逐步养成早睡早起的习惯。3. **娱乐与放松** - **02-10 至 02-18**：观看了《鬼怪-池恩棹的生生不息》、《明侦》第二期，并继续磕 CP-Re 作为背景音。 - **02-19 至 02-27**：观看了《明侦》第三期，重刷了《永夜星河》和《月光变奏曲》。 - **总结**：适当的娱乐放松有助于缓解压力，建议继续保持，但要注意控制时间，避免影响学习和休息。<br/>4、学习方法改进：“1. **LTN 学习** - 当前的学习周期和节奏较为合理，建议继续保持，并在错题复习中插入一次专门的错题复习环节，以加深印象。2. **学习计划** - 学习计划的制定和执行较为坚定，建议继续按照计划执行，并根据实际情况进行微调。3. **写作与输出** - 写作能力在逐步提升，建议继续迭代写作方法，尝试不同的写作风格和结构，以提升博客的质量和影响力。” |
|               | "content"：“我有一组数据，是我2025-02-10 至 2025-02-27 共计17天的学习、日常记录，我想要汇总、总结得到对 前端 和 其他事项 的回顾总结。输出格式为 {“front_conclude”: ‘’”, “others”: “”}。每周期数据列表数据如下：xxx” | 大致满意                                                     |                                                              |
|               |                                                              |                                                              |                                                              |

