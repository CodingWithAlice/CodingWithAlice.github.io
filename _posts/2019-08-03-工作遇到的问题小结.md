---
layout:     post
title:      工作遇到的问题小结
subtitle:  
date:       2019-08-03
author:     
header-img: 
catalog: true
tags:
    - < 微信小程序的学习 >
typora-root-url: ..
---

# 工作遇到的问题小结（实习）

1. 页面显示没有数据的时候（三级联动），注意去mounted里面看一下，获取数据的方法如getAddress()；有没有执行，是否将数据渲染到了页面

2. async作为一个关键词放在函数前面，表示异步执行，该函数的执行不阻塞后面代码的执行；await表示等待await后面的函数执行完毕，并且有了返回结果之后，才能继续执行下面的代码

3. 经验3.在调用接口的时候，注意传参和接收参数的形式要一致

```javascript
//这是声明调用接口的方法，传递的参数是params，参数的形式是键值对形式
export const getTree = (params) => {
	return new Promise(resolve => {
        SWXHR.get('/school', {   //这里写接口地址 
                params: params
            })
            .then(res => {
               resolve(res);
          });
    });
};
```

在接收参数的时候，直接在方法中异步调用，同时要记得在mount里面调用`this.getSchool();`执行函数，方便页面初次加载的时候有数据

```javascript
async getSchool() {
      let res = await getTree();
      if (res.code === "success") {
        	this.data = res.data;
      }
    }
```

当传递的参数**可选**时，接口处的参数形式应该写为{params}，这样在实例组件调用的时候以该参数的属性传递/键值对的形式传递   

```javascript
export const getInfo = (params) => {    
	return new Promise(resolve => {        
		SWXHR.get('/member', {params})
            .then(res => {
            	resolve(res);
        	});    
    });
};
```

```javascript
 async getInfoList() {      
     let params = {        
         Num: this.page,        
         Size: this.Size,        
         Id: this.Id,        
         Type: this.Type      };      
     if (this.name) {        
         if (/^[0-9]*$/.test(this.name) === true) {          
             params.telephone = this.name;        
         }else if(/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/g.test(this.name)   
             params.email = this.name;        
         } else {          
             params.name = this.name;        
         }      
     }      
     if (this.school) {        
         params.school = this.school;      
     }      
     let res = await getInfo(params);      
     if (res.code === "success") {        
         this.data = res.data.items;             
         this.total = Number(res.data.total);      
     }    
 },
```

4. 在接口调用参数的时候，一般以键值对的形式调用，可以在`F12`的`Network`里面，点击`XHR`查询参数传递了什么，根据传递的参数判断是否传递了正确参数。

5. 接口返回404状态码的时候，确认自己的运行环境，在测试环境运行调用接口的时候，需要后端把接口部署到测试服务器上，否则就会接口报错。

6. 打包上传服务器的时候，先`npm run build `在终端对文件进行打包，然后将打包好的` dist `文件夹里的`css js `等文件 通过`WinSCP`软件进行上传，其中这个上传软件需要 主机名 端口 账号 密码
7. `element UI`组件，进行upload上传excel导入功能的时候，on-success/before-upload等钩子函数，要写在实例对象的`methods`中，才能够正常调用，否则会报`undefined in render` 的错。

8. `ElementUI Tree` 树形控件` https://blog.csdn.net/qq_42255106/article/details/80753096 ` 写的很细

9. 在做输入文字提醒的时候，可以使用三级列表形式提醒，使用的是element中的el-input 和el-tree ，如果想要直接以数据形式提醒的话，可以使用element当中的el-autocomplete。