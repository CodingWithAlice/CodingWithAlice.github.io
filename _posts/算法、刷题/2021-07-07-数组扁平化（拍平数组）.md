---
layout:     post
title:      æ•°ç»„æ‰å¹³åŒ–ï¼ˆæ‹å¹³æ•°ç»„ï¼‰
subtitle:  
date:       2021-07-07
author:     
header-img: 
catalog: true
tags:
    - < ç®—æ³•é¢˜ >
typora-root-url: ..
---

## æ•°ç»„æ‰å¹³åŒ–ï¼ˆæ‹å¹³æ•°ç»„ï¼‰

å‚è€ƒæ–‡ç« ï¼š[æ•°ç»„æ‹å¹³è¿ç¯é—®](https://segmentfault.com/a/1190000021366004) - åªç ”ç©¶åˆ°ç¬¬äºŒé—® reduceï¼Œæ²¡æœ‰å†æ·±å…¥ï¼Œä¸€å…±ä¸ƒé—®

#### é¢˜ç›®ï¼š

å¦‚ä½•å®ç° `flat` æ–¹æ³•ï¼Ÿå¤šç»´æ•°ç»„=>ä¸€ç»´æ•°ç»„

#### è§£ç­”ï¼š

- æ–¹æ³•ä¸€ï¼š ç›´æ¥è°ƒç”¨ `Array` çš„ `flat` æ–¹æ³• - `arr = arrays.flat(Infinity);`

    ä½œç”¨æ˜¯å°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°æ®æ²¡æœ‰å½±å“ã€‚

    - ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚
    - ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œæ‹‰å¹³â€çš„å±‚æ•°
    - `Infinity` å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„
    - ä¼ å…¥ `<=0` çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€
    - å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œ`flat()` æ–¹æ³•ä¼šè·³è¿‡ç©ºä½

    ```js
    const animals = ["ğŸ·", ["ğŸ¶", "ğŸ¶"], ["ğŸ¶", ["ğŸ‘", ["ğŸ²"]], "ğŸ·"]];
    
    // ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚
    animals.flat();
    // ["ğŸ·", "ğŸ¶", "ğŸ¶", "ğŸ¶", ["ğŸ‘", ["ğŸ²"]], "ğŸ·"]
    
    // ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œæ‹‰å¹³â€çš„å±‚æ•°
    animals.flat(2);
    // ["ğŸ·", "ğŸ¶", "ğŸ¶", "ğŸ¶", "ğŸ‘", ["ğŸ²"], "ğŸ·"]
    
    // Infinity å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„
    animals.flat(Infinity);
    // ["ğŸ·", "ğŸ¶", "ğŸ¶", "ğŸ¶", "ğŸ‘", "ğŸ²", "ğŸ·"]
    
    // ä¼ å…¥ <=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€
    animals.flat(0);
    animals.flat(-10);
    // ["ğŸ·", ["ğŸ¶", "ğŸ¶"], ["ğŸ¶", ["ğŸ‘", ["ğŸ²"]], "ğŸ·"]]
    
    // å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè·³è¿‡ç©ºä½
    ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ",,].flat();
    // ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ"]
    ```

- æ–¹æ³•äºŒï¼š

    è‡ªå·±å®ç°çš„æ ¸å¿ƒæ€è·¯

    - **ç¬¬ä¸€ä¸ªè¦è§£å†³çš„å°±æ˜¯éå†æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼›**

        `for å¾ªç¯`ã€`for...of`ã€`for...in`ã€`forEach()`ã€`entries()`ã€`keys()`ã€`values()`ã€`reduce()`ã€`map()`

        ```js
        // entriesï¼ˆï¼‰- è¿”å›å¯æšä¸¾ã€å±æ€§çš„é”®å€¼å¯¹ã€‘æ•°ç»„
        for (let [index, value] of arr.entries()) {console.log(index, value)}
        // keys() - è¿”å›å¯æšä¸¾ã€å±æ€§ã€‘ç»„æˆçš„æ•°ç»„
        for (let index of arr.keys()) {console.log(index)}
        // values() - è¿”å›å¯æšä¸¾ã€å±æ€§å€¼ã€‘çš„å¯¹è±¡
        for (let value of arr.values()) {console.log(value)}
        // reduce() - è¯¦ç»†è§åŒç›®å½•ä¸‹ reduce åšæ–‡
        arr.reduce((pre, cur) => {console.log(pre, cur); return pre;}, []);
        // map() - ä¸€ä¸ªç”±åŸæ•°ç»„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°çš„ç»“æœç»„æˆçš„æ–°æ•°ç»„
        arr.map(value => console.log(value));
        ```

    - **ç¬¬äºŒä¸ªè¦è§£å†³çš„å°±æ˜¯åˆ¤æ–­å…ƒç´ æ˜¯å¦æ˜¯æ•°ç»„ï¼›** - è¯¦ç»†æŸ¥çœ‹å•ç‹¬åšå®¢

        `instanceof`ã€`constructor`ï¼ˆå¯è¢«æ”¹å†™ï¼Œä¸å‡†ç¡®ï¼‰ã€`Object.prototype.toString`ï¼ˆå¯è¢«æ”¹å†™ï¼Œä¸å‡†ç¡®ï¼‰ã€`isArray`

        ```js
        let arr = [1, 2, 3];
        arr instanceof Array; // true
        arr.constructor === Array; // true
        Object.prototype.toString.call(arr) === '[object Array]'; // true
        Array.isArray(arr);// true
        ```

    - ç¬¬ä¸‰ä¸ªè¦è§£å†³çš„å°±æ˜¯å°†æ•°ç»„çš„å…ƒç´  **å±•å¼€**

        - **å±•å¼€ä¸€å±‚**

        ç¬¬1âƒ£ï¸ç§ï¼š`...` æ‰©å±•è¿ç®—ç¬¦ + `concat`

        ã€æ³¨æ„ã€‘ï¼šæ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰å†…éƒ¨ä½¿ç”¨ `forâ€¦of` å¾ªç¯

        ```javascript
        const animals = ["ğŸ·", ["ğŸ¶", "ğŸ¶"], ["ğŸ¶", ["ğŸ‘", ["ğŸ²"]], "ğŸ·"]];
        arrays = [].concat(...animals);// ["ğŸ·", "ğŸ¶", "ğŸ¶", "ğŸ¶", Array(2), "ğŸ·"]
        ```

        ç¬¬2âƒ£ï¸ç§ï¼š`apply` + `concat`

        `apply` åœ¨ç»‘å®šä½œç”¨åŸŸæ—¶ï¼Œä¼šå°†ä¼ å…¥çš„ **æ•°ç»„å…ƒç´ ä½œä¸ºå•ç‹¬çš„å‚æ•°** çš„ä¼ å…¥åˆ°è¦æ‰§è¡Œçš„å‡½æ•°ä¸­

        ```js
        arrays = [].concat.apply([], animals);
        // å®é™…é€ä¸€æ‰§è¡Œç±»ä¼¼äº
        [].concat("ğŸ·").concat(["ğŸ¶", "ğŸ¶"]).concat(["ğŸ¶", ["ğŸ‘", ["ğŸ²"]]]).concat("ğŸ·");
        ```

        -  **å…¨éƒ¨å±•å¼€**

        ç¬¬3âƒ£ï¸ç§ï¼š`toString` + `split`

        ```js
        arr2.toString().split(',');
        // toString() æ–¹æ³•ä¼šæŠŠæ•°ç»„æ‰“å¹³ - "ğŸ·,ğŸ¶,ğŸ¶,ğŸ¶,ğŸ‘,ğŸ²,ğŸ·"
        ```

        æ‰©å±•ï¼šé€šè¿‡ æ­£åˆ™ + `split`

        ```js
        let str = JSON.stringify(arrays); // å¤„ç†æˆå­—ç¬¦ä¸²
        // å°†å…¨å±€æ‰€æœ‰ []"" æ›¿æ¢æˆç©º
        arr1 = str.replace(/(\]|\[|\"|\")/g, '').split(',');
        ```

        ```js
        let str = JSON.stringify(arrays); // å¤„ç†æˆå­—ç¬¦ä¸²
        str = str.replace(/(\]|\[|\"|\")/g, '');
        str = '[' + str + ']';
        // é€šè¿‡ JSON.parse å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°ç»„
        ary = JSON.parse(str);
        ```

        ç¬¬4âƒ£ï¸ç§ï¼šé€’å½’

        æ‰¾åˆ°æ‰€æœ‰æ•°ç»„å…ƒç´ ï¼Œé€’å½’ï¼Œç›´åˆ°æ‰¾åˆ°åº•å±‚éæ•°ç»„å…ƒç´ ï¼Œè¿”å›æŠ›å‡º

        ```js
        function flatFun(arr) {
            let res = [];
            arr.forEach(item => {
                if (Array.isArray(item)) {
                    // é€’å½’å†™æ³•ä¸€ï¼š
                    res = res.concat(arguments.callee(item));
                    // é€’å½’å†™æ³•äºŒï¼š
                    // res = res.concat(flatFun(item));
                } else {
                    res.push(item);
                }
            });
            return res;
        }
        ```

        ç¬¬5âƒ£ï¸ç§ï¼š`reduce`
        
        ```js
        var flatFun = (arrays) => {
            return arrays.reduce((pre, cur) => {
        		// å†™æ³•ä¸€ï¼š        
                // return pre.concat(Array.isArray(cur) ? flatFun(cur) : cur);
                // å†™æ³•äºŒï¼š
                return (Array.isArray(cur) ? pre.concat(flatFun(cur)) : pre.concat(cur));
            },[])
        }
        ```
        
        

