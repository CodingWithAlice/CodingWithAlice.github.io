---
layout:     post
title:      链表 206.反转一个单链表
subtitle:  
date:       2021-06-03
author:     
header-img: 
catalog: true
tags:
    - < 算法题 >
typora-root-url: ..
---

## 链表 206/24.反转一个单链表

#### 力扣 206反转一个单链表/剑指offer 24

定义一个函数，输入一个链表的头节点，反转该链表并输出反转后链表的头节点      

示例:        输入: 1->2->3->4->5->NULL        输出: 5->4->3->2->1->NULL

```javascript
 //Definition for singly - linked list.
  function ListNode(val) {
    this.val = val;
    this.next = null;
  }
```

1.自己写的算法：

<img src="/../img/assets_2019/image-20210605160413474.png" alt="image-20210605160413474" style="zoom:35%;" />

时间复杂度：O(n)，空间复杂度：xx

思想：用数组存储反向链表的值，然后再从链表头到尾重新赋值

```javascript
  var reverseList = function (head) {
    // 存储第一个节点，用于获取节点值 arr
    let pNode = head;
    let arr = [];
    while (pNode !== null ) {
        arr.unshift(pNode.val);
        pNode = pNode.next
    };
    // 存储第一个节点，作为结果的 head
    let first = head;
    for(let i=0; i<arr.length; i++) {
        head.val = arr[i];
        head = head.next;
    }
    return first
  };
```

2.官方方法一：迭代         86.3% 80ms/34.7MB

假设存在链表 1 → 2 → 3 → Ø，我们想要把它改成 Ø ← 1 ← 2 ← 3。        

在遍历列表时，将当前节点的 next 指针改为指向前一个元素。        

由于节点没有引用其上一个节点，因此必须事先存储其前一个元素。        

在更改引用之前，还需要另一个指针来存储下一个节点。        

不要忘记在最后返回新的头引用！       

```javascript
var reverseList = function (head) {
    let prev = null;
    let current = head;
    while (current != null) {
      let next = current.next;
      current.next = prev;
      prev = current;
      current = next;
    }
    return prev
  }
```

3.官方方法二：递归        

递归版本稍微复杂一些，其关键在于反向工作。

假设列表的其余部分已经被反转，现在我该如何反转它前面的部分？       

 假设列表为：        n1->... -> n{k-1} -> n{k} -> n{k+1} -> ... -> n{m} -> Ø        

若从节点 n{k+1}到 n{m}已经被反转，而我们正处于 n{k}。       

 n{1}-> ... -> n{k-1} -> n{k} -> n{k+1} <-... <-n{m}        

我们希望 n{k+1} 的下一个节点指向 n{k}  。        

所以，n{k}.next.next = n{k}。        

要小心的是 n{1}的下一个必须指向 Ø 。        

如果你忽略了这一点，你的链表中可能会产生循环。

如果使用大小为 2 的链表测试代码，则可能会捕获此错误。 

```javascript
 var reverseList = function (head) {
    if (head == null || head.next == null) return head;
    var p = reverseList(head.next);
    head.next.next = head;
    head.next = null;
    return p;
  }
```

